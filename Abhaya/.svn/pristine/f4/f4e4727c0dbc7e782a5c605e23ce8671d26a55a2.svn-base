import { Component, OnInit, Input } from '@angular/core';
import { NgbActiveModal, NgbDate } from '@ng-bootstrap/ng-bootstrap';
import { NgbDateStruct, NgbCalendar } from '@ng-bootstrap/ng-bootstrap';
import { VehicleApiService } from '.././services/vehicle.api.service';

@Component({
  selector: 'app-vehiclemap',
  templateUrl: './vehiclemap.component.html',
  styleUrls: ['./vehiclemap.component.css']
})
export class VehiclemapComponent implements OnInit {
 
  @Input() vehiclelocation;
  vehicleLocationDetails;
  ismapped = true;
  lat = 17.6868;
  lng = 83.2185;
  iconURL = '/assets/images/ic_auto_yellow.png';
  constructor(private vehicleApiService: VehicleApiService, public activeModal: NgbActiveModal) { }

  ngOnInit() {
    if(this.vehiclelocation.serialNumber == undefined){
      this.ismapped = false;
    }
    else{
      this.vehicleApiService.getVehicleLocation(this.vehiclelocation.serialNumber).subscribe((data: any) => {
        this.vehicleLocationDetails  =  data;
        console.log(this.vehicleLocationDetails);
        this.ismapped = true;
        this.lat = this.vehicleLocationDetails.latitude;
        this.lng = this.vehicleLocationDetails.langitude;
      });
    }
    
  }

}
